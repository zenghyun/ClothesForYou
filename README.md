# 🌈 Clothes For You
<br>

 <p align="center"><img src="https://user-images.githubusercontent.com/114131063/224213723-a74ee0a5-0ce3-4233-808d-5592fb6b3cc1.png" width="500px" height="400px"></p> 
<br>
<br>

## 배포 주소 
**추가 예정** 

<br>
<br>

## 💻 프로젝트 소개

**Clothes for You**는 OpenWeatherMap API를 이용하여 기온에 따른 옷차림을 추천해 주는 사이트입니다. 이 프로젝트는 출근할 때, 외출할 때, 혹은 잠깐 외출할 때 어떻게 옷을 입고 나가야 할지에 대한 고민을 덜어주고 싶은 생각에서 시작되었습니다. 
<br>
<br>

## 😀 개발 인원

<br>

| <p style="font-size:20px">이정현</p> |
| :------------: |
|   <p align="center"><img src="https://user-images.githubusercontent.com/114131063/224213911-72bc1119-ba49-4d3f-8249-d7031c8fd0d9.jpg" width="250px" height="250px"></p>   |   
|  <p style="font-size:18px"> [@zenghyun](https://github.com/zenghyun)  </p>   |  

<br>
<br>

## 🕰 개발 기간

### - 23.02.13 ~ 23.03.08
 
  <br>
  <br>


## ⚙ 개발 환경

- `HTML`

- `CSS`

- `SASS`

- `JAVASCRIPT`

- **IDE** : Visual Studio Code
- **library** : Chart.js

<br>
<br>

## 📃 페이지 소개
<br>

### 메인 페이지
메인 페이지에서는 위치에 따른 기온과 옷차림, 주간 날씨, [오늘 비와?](https://www.youtube.com/@user-vb8eg8qv1p)  YouTube 채널의 최근 일기 예보와 기온에 따른 옷차림 선정 Tip을 알려줍니다. 

<br>

### 서브 페이지
서브 페이지에서는 과거에 내가 입었던 옷차림을 업로드할 수 있는 다이어리와 **굳이 입어보지 않아도 옷에 대한 color match를 할 수 있는 기능이 있으면 좋겠다.** 라는 생각에 간단한 color match를 통해 나만의 코디를 완성해 볼 수 있게 만들었습니다. 

다이어리와 color match를 나란히 배치함으로써 다이어리에 올린 사진에서 입은 옷의 색을 `input` 태그의 `type="color"`를 통해 가져올 수 있게 하여 사용자가 실제로 갖고 있는 옷의 색을 반영하여 코디할 수 있는 장점이 있습니다. 

<br>
<br>

## 📷 페이지 사진
<br>

|메인 페이지 - 날짜별 예보|메인 페이지 - 오늘의 코디|메인 페이지 - 상세 날짜 |메인 페이지 - 주간 날씨|메인 페이지 - 날씨 예보|메인 페이지 - Choice Tip|
|------|---|---|---|---|---|
|<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224220312-968e2ac2-b45b-4b04-b04a-e7c71c6a548a.png" width="250px" height="250px"></p>|<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224213723-a74ee0a5-0ce3-4233-808d-5592fb6b3cc1.png" width="250px" height="250px"></p>|<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224220336-0810835a-44bb-4087-ae34-afa5cfeafe13.png" width="250px" height="250px"></p>|<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224220354-2fd281ac-c989-4850-ae0c-43603b654a57.png" width="250px" height="250px"></p>|<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224220369-b86b7f9c-190e-4913-9354-5db9b556a188.png" width="250px" height="250px"></p>|<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224220384-1c56a14a-42eb-41e5-9eac-86efebd4b732.png" width="250px" height="250px"></p>|
<br>

|서브 페이지 - Clothes Diary|서브 페이지 - Color Match|
|------|---|
|<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224220394-842c5456-fa10-410c-a183-7a8703dcbfa9.png" width="250px" height="250px"></p>|<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224220401-f779cbaa-9e5e-4e5e-8d33-476a9de84d16.png" width="250px" height="250px"></p>|


<br>
<br>

## 시작 가이드 
- OpenWeatherMap API를 사용하기 위한 API KEY [OpenWeatherMap API](https://openweathermap.org/price)
- YOUTUBE API를 사용하기 위한 API KEY [YouTube API](https://developers.google.com/youtube/v3/getting-started?hl=ko)

<br>


## 저작권 
- [@ann_maulina](https://www.instagram.com/ann_maulina/?igshid=NTdlMDg3MTY%3D)

|오전 6시 ~ 오후 3시|오후 4시 ~ 오후 10시|오후 11시 ~ 아침 5시|
|------|---|---|
|<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224217871-af572b11-81b0-4b2a-bd57-091b975124de.gif" width="300px" height="300px"></p> |<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224217877-86bcc4f5-7fae-4f51-a103-debe73297d53.gif" width="300px" height="300px"></p> |<p align="center"><img src="https://user-images.githubusercontent.com/114131063/224217881-ebc8b420-d818-4d3e-8e41-0a4aac83ea97.gif" width="300px" height="300px"></p> |

<br>

본 이미지의 저작권은 [@ann_maulina](https://www.instagram.com/ann_maulina/?igshid=NTdlMDg3MTY%3D)님에게 있습니다.

<br>

<img src="https://user-images.githubusercontent.com/114131063/224218043-e26bda23-6860-4b15-a9c7-2a9bf2fb8056.png" width="400px" height="400px">

<br>

- [weather-icon](https://erikflowers.github.io/weather-icons/)

<br>

- [flaticon](https://www.flaticon.com/kr/) &nbsp;&nbsp;&nbsp;   <select
            name="flaticon"
            id="flaticon-list"
            onchange="window.open(value,'_blank')"
            rel="noopener noreferrer"
          >
            <option value="" selected>---저작자 리스트---</option>
            <option value="https://www.flaticon.com/kr/authors/pixel-perfect">
              Pixel perfect
            </option>
            <option value="https://www.flaticon.com/kr/authors/neungstockr">
              neungstockr
            </option>
            <option value="https://www.flaticon.com/kr/authors/amethystdesign">
              AmethystDesign
            </option>
            <option value="https://www.flaticon.com/kr/authors/wanicon">
              wanicon
            </option>
            <option value="https://www.flaticon.com/kr/authors/nhor-phai">
              Nhor Phai
            </option>
            <option value="https://www.flaticon.com/kr/authors/victoruler">
              Victoruler
            </option>
            <option value="https://www.flaticon.com/kr/authors/pronicon">
              Pronicon
            </option>
            <option value="https://www.flaticon.com/kr/authors/umeicon">
              Umeicon
            </option>
            <option value="https://www.flaticon.com/kr/authors/kmg-design">
              kmg design
            </option>
            <option value="https://www.flaticon.com/kr/authors/iconixar">
              iconixar
            </option>
            <option value="https://www.flaticon.com/kr/authors/smashicons">
              Smashicons
            </option>
            <option value="https://www.flaticon.com/kr/authors/bzzrincantation">
              BZZRINCANTATION
            </option>
            <option value="https://www.flaticon.com/kr/authors/nawicon">
              nawicon
            </option>
            <option value="https://www.flaticon.com/kr/authors/pongsakornred">
              pongsakornRed
            </option>
            <option value="https://www.flaticon.com/kr/authors/slidicon">
              Slidicon
            </option>
            <option value="https://www.flaticon.com/kr/authors/uniconlabs">
              Uniconlabs
            </option>
            <option value="https://www.flaticon.com/kr/authors/rudiyana">
              Rudiyana
            </option>
            <option
              value="https://www.flaticon.com/kr/authors/alfian-dwi-hartanto"
            >
              Alfian Dwi Hartanto
            </option>
            <option value="https://www.flaticon.com/kr/authors/witdhawaty">
              Witdhawaty
            </option>
            <option value="https://www.flaticon.com/kr/authors/safaruly">
              Safaruly
            </option>
            <option value="https://www.flaticon.com/kr/authors/fliqqer">
              Fliqqer
            </option>
            <option value="https://www.flaticon.com/kr/authors/surang">
              surang
            </option>
            <option value="https://www.flaticon.com/kr/authors/hasymi">
              Hasymi
            </option>
            <option value="https://www.flaticon.com/kr/authors/lumi">
              Lumi
            </option>
            <option value="https://www.flaticon.com/kr/authors/pojok-d">
              pojok d
            </option>
            <option value="https://www.flaticon.com/kr/authors/toz-icon">
              ToZ Icon
            </option>
            <option value="https://www.flaticon.com/kr/authors/microstd">
              microstd
            </option>
            <option value="https://www.flaticon.com/kr/authors/atif-arshad">
              Atif Arshad
            </option>
            <option value="https://www.flaticon.com/kr/authors/eucalyp">
              Eucalyp
            </option>
            <option value="https://www.flaticon.com/kr/authors/muhammad-usman">
              Muhammad_Usman
            </option>
            <option value="https://www.freepik.com">Freepik</option>
            <option value="https://www.flaticon.com/kr/authors/futuer">
              Futuer
            </option>
            <option value="https://www.flaticon.com/kr/authors/juicy-fish">
              juicy_fish
            </option>
            <option value="https://www.flaticon.com/kr/authors/maan-icons">
              Maan Icons
            </option>
            <option
              value="https://www.flaticon.com/kr/authors/nathania-desmonda-tjipto"
            >
              Nathania Desmonda Tjipto
            </option>
            <option value="https://www.flaticon.com/kr/authors/graphixs-art">
              Graphix's Art
            </option>
            <option
              value="https://www.flaticon.com/kr/authors/rizky-maulidhani"
            >
              rizky maulidhani
            </option>
            <option value="https://www.flaticon.com/kr/authors/aswell-studio">
              Aswell Studio
            </option>
            <option value="https://www.flaticon.com/kr/authors/justicon">
              justicon
            </option>
            <option value="https://www.flaticon.com/kr/authors/victoruler">
              Victoruler
            </option>
            <option
              value="https://www.flaticon.com/kr/authors/amonrat-rungreangfangsai"
            >
              amonrat rungreangfangsai
            </option>
            <option value="https://www.flaticon.com/kr/free-icons/">
              Freepik
            </option>
            <option value="https://www.flaticon.com/authors/amethystdesign">
              AmethystDesign
            </option>
            <option
              value="https://www.flaticon.com/kr/authors/vitaly-gorbachev"
            >
              Vitaly Gorbachev
            </option>
            <option value="https://www.flaticon.com/kr/authors/victoruler">
              Victoruler
            </option>
            <option value="https://www.flaticon.com/kr/authors/iconixar">
              iconixar
            </option>
            <option value="https://www.flaticon.com/kr/authors/lapiyee">
              lapiyee
            </option>
          </select>

<br>
<br>

 ## 📌 주요 기능

- [OpenWeatherMap API에서 data를 불러오는 기능](#데이터-불러오기)

- [3시간 간격으로 5일간의 기온과 날씨를 알려주는 기능](#3시간-간격으로-5일간의-기온과-날씨-가져오기)

- [현재 시간을 기준으로 가까운 시간대의 기온과 상세 날씨, 체감온도, 습도, 풍향 및 풍속을 알려주는 기능](#)

- [평균 온도를 기준으로 기온별 옷차림을 정해주는 기능](#)

- [주간 날씨의 습도, 최고 기온, 최저 기온 및 날씨를 알려주는 기능](#)

- [유튜브 API를 이용하여 "오늘 비와?" 채널의 최근 날씨 예보를 보여주는 기능](#)

- [기온별 옷차림 선정 Tip을 알려주는 기능](#)

- [내가 입었던 옷차림을 기록할 수 있는 기능](#)

- [옷을 입을 때 컬러 매치를 간단하게 도와줄 수 있는 기능](#)

<br>
<br>

---

<br>

## 데이터 불러오기
<br>

### 📌 목차

- [1. OpenWeatherMap API에서 Data 받아오기](#1-openweathermap-api에서-data-받아오기)

- [2. 받아온 data를 통해 날씨 정보 불러오기](#2-받아온-data를-통해-날씨-정보-불러오기)


<br>

### **1.** OpenWeatherMap API에서 Data 받아오기

<br>

우선, OpenWeatherMAP API Data를 받아오기 위해서 `fetch` 메서드를 사용했습니다.<br>

```javascript
(function getAPIData() {
  try {
    if (!sessionStorage.hasOwnProperty("location")) {
      navigator.geolocation.getCurrentPosition(onGeoOk, onGeoError);
    } else {
      const loadData = sessionStorage.getItem("location");
      const parsedData = JSON.parse(loadData);
      getWeather(parsedData);
    }
  } catch (error) {
    alert("위치를 가져올 수 없습니다.");
  }
})();
```

<br>

즉시 실행 함수를 이용하여 data를 받아오는 함수를 작성했습니다.<br>

이 함수는 세션 스토리지에 **location**이라는 이름으로 저장된 아이템이 있지 않을 때, `navigator.geolocation.getCurrentPosition(onGeoOk, onGeoError);`를 이용합니다.

만약, 세션 스토리지에 **location**이라는 이름으로 저장된 아이템이 있다면, 세션 스토리지에서 **location** 이름으로 저장된 JSON 포맷의 아이템을 객체로 변환하여 `getWeather` 함수의 매개변수로서 사용됩니다.
<br>
<br>
이는, 웹 페이지에 최초로 접속했을 때가 아닌 웹 페이지에서 다른 목차로 넘어갔다가 다시 메인(홈) 페이지로 돌아왔을 때, 다시 `fetch` 메서드를 통해 data를 받아오는 것이 아닌, 세션 스토리지에 저장된 data를 가져오기 위함입니다.
<br>
<br>

```javascript
function onGeoOk(position) {
  const lat = position.coords.latitude;
  const lon = position.coords.longitude;

  const url = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;

  try {
    fetch(url)
      .then((response) => {
        if (response.status >= 200 && response.status < 300) {
          return response.json();
        } else {
          return response.json().then((errData) => {
            console.log(errData);
            throw new Error("Something went wrong -server side.");
          });
        }
      })
      .catch((error) => {
        console.log(error);
        throw new Error("Something went wrong.");
      })
      .then((data) => {
        let myData = JSON.stringify(data);
        sessionStorage.setItem("location", myData);
        getWeather(data);
      });
  } catch (error) {
    console.log("Data not found");
  }
}
```

`onGekOk`를 통해 위도와 경도를 받아온 후, url을 통해 OpenweatherMapAPI에 data를 요청합니다. <br>
이때, 요청에 의한 응답 신호가 **200과 300사이**라면 제대로 된 응답이라고 판단하여, 데이터를 받아옵니다. 그 외의 응답 신호를 받는다면, `Something went wrong -server side.`라는 에러 메시지를 출력합니다. 만약 응답 신호를 받지 못했을 때는 `Something went wrong.`라는 메시지를 출력합니다. <br>

제대로 된 응답 신호를 통해 데이터를 받아왔다면, 그 데이터(객체)를 JSON 포맷의 문자열로 변환하여 세션 스토리지에 **location**이라는 이름으로 저장한 후, `getWeather` 함수를 호출합니다. <br>

만약 url을 매개변수로 사용하는 `fetch` 메서드가 제대로 된 동작을 하지 못한다면 `Data not found`라는 오류 메시지를 출력합니다.
<br>
<br>

### **2.** 받아온 data를 통해 날씨 정보 불러오기

`getWeather` 함수에서는 날씨 정보를 사용하는 방식이 크게 3가지가 있습니다. <br>

#### 1. 3시간 간격으로 5일간의 기온과 날씨를 알려주는 기능

#### 2. 현재 시간을 기준으로 가까운 시간대의 기온과 상세 날씨, 체감온도, 습도, 풍향 및 풍속을 알려주는 기능

#### 3. 주간 날씨의 습도, 최고 기온, 최저 기온 및 날씨를 알려주는 기능입니다.


<br>

다음은 `getWeather` 함수에서 가져온 날씨 data를 HTML에서 어떤 방식으로 보여줄 것인지에 대한 설명입니다.  

<br>

처음에는 받아온 데이터를 일일이 자식 태그로 HTML에 작성해 줬습니다. 그러다가 반복되는 태그를 통해 HTML의 길이가 길어지게 되었고, 코드의 길이를 줄이고 싶어졌습니다. **반복되는 태그를 하나의 틀로 만들어놓고, 안에 내용만 바꿔줄 수 있으면 좋지 않을까?**
라는 고민을 하다가 `template`태그와 `importNode`에 대해 알게 되었습니다. 

<br>

아래는 제가 사용한 방식입니다. 

### HTML

```html
<!-- 3시간 간격으로 5일간의 기온과 날씨 알려주는 template -->
<template class="weather-template">
  <li class="weather-item">
    <span class="weather-main"></span>
    <span class="temp"></span>
    <span class="day"></span>
  </li>
</template>

<!-- 현재 시간을 기준으로 가까운 시간대의 날씨 정보를 알려주는 template -->
<template class="sub-weather-template">
  <li class="weather-item">
    <span class="weather-main"></span>
    <span class="temp"></span>
    <span class="day"></span>
    <span class="time"></span>
   
    <span class="weather-data">
      <span class="weather-description"></span>
      <span class="feel-temp"></span>
      <span class="humidity"></span>
      <span class="wind"></span>
    </span>
  </li>
</template>

<!-- 주간 최고기온과 최저기온을 알려주는 template -->
<template class="weekly-weather-template">
  <li class="weather-item weekly-weather-item">
    <span class="today"></span>
    <span class="humidity"></span>
    <span class="max-weather-main"></span>
    <span class="max-temp"></span>
    <span class="min-weather-main"></span>
    <span class="min-temp"></span>
  </li>
</template>
```

`template` 태그를 사용한 이유는 반복되는 태그를 줄임으로서, 코드의 길이를 줄이기 위함입니다.

<br>

### getWeather


```javascript
function getWeather(data) {
    const weatherDatas = data.list.length;

    const weatherLists = document.querySelector('#weather-lists');
    const subWeatherLists = document.querySelector('#sub-weather-lists');
    const weeklyWeatherLists = document.querySelector('#weekly-weather-lists');

    const weatherTemplate = document.querySelector('.weather-template');
    const subWeatherTemplate = document.querySelector('.sub-weather-template');
    const weeklyWeatherTemplate = document.querySelector('.weekly-weather-template');

    /* 생략 */

for (let i = 0; i < weatherDatas; i++) {
        const weatherLi = document.importNode(weatherTemplate.content, true);
        const subWeatherLi = document.importNode(subWeatherTemplate.content, true);
        const weeklyWeatherLi = document.importNode(weeklyWeatherTemplate.content, true);

    /* 생략 */
```
[weatherLists](#1-3시간-간격으로-5일간의-기온과-날씨를-알려주는-기능), [subWeatherLists](#2-현재-시간을-기준으로-가까운-시간대의-기온과-상세-날씨-체감온도-습도-풍향-및-풍속을-알려주는-기능), [weeklyWeatherLists](#3-주간-날씨의-습도-최고-기온-최저-기온-및-날씨를-알려주는-기능-입니다)는 HTML 상에서 template를 자식 요소로 받을 부모입니다. 

아래의 template 변수들은 HTML상에 있는 `template` 태그입니다. 

**for문**은 내가 받아온 ` const weatherDatas = data.list.length;`의 길이만큼 반복하게 되며, 각각의 `template`는 `importNode`를 통해 복제되며, **true**를 지정하여 자식 노드를 포함 시키겠다고 선언하였습니다. 


## 3시간 간격으로 5일간의 기온과 날씨 가져오기
